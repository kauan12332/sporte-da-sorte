<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eporte da Sorte</title>
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #000000;
      color: #0f0;
      scroll-behavior: smooth;
    }
    header {
      background-color: #000;
      border-bottom: 2px solid #0f0;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      padding: 10px 20px;
    }
    header h1 {
      margin: 0;
      font-size: 24px;
      color: #0f0;
    }
    main {
      padding: 80px 20px 40px;
    }
    section {
      margin-bottom: 40px;
    }
    h2 {
      border-bottom: 1px solid #0f0;
      padding-bottom: 5px;
    }
    textarea, input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 30px;
      background: #131111;
      color: #0f0;
      border: 1px solid #0f0;
    }
    footer {
      text-align: center;
      padding: 20px;
      border-top: 1px solid #0f0;
      color: #0f0;
    }
    .refazer{
      width: 90%;
      padding: 10px;
      margin-top: 20px;
      margin-bottom: 30px;
      background: #131111;
      color: #0f0;
      text-decoration: none;
      border: 1px solid #0f0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Esporte da Sorte</h1>
    <img src="img/logo.png" alt="logo" style=" height: 50px; vertical-align:baseline; border-radius: 10%;">
  </header>
  <main>
    <section id="regulamento">
      <h2>Regulamento Geral</h2>
      <p>O cliente deve enviar os palpites antes do primeiro jogo da grade iniciar. O valor m√≠nimo da aposta √© R$5,00. Os pagamentos devem ser realizados via Pix...</p>
      <!-- Continue o texto do regulamento aqui -->
    </section>

    <section id="formulario-apostas">
      <h2>Fa√ßa sua Aposta</h2>
      <form id="formAposta">
        <div id="jogosContainer">
          <input type="text" name="jogo[]" placeholder="Digite o jogo e o palpite" required />
        </div>
        <input type="text" name="nome" placeholder="Seu nome completo" required />

        <a href="ao-vivo.html" class="refazer">Adicionar Outro Jogo</a>
        <input type="number" name="valor" placeholder="Valor da Aposta (R$)" step="0.01" required oninput="atualizarValor()" />
        <p>Total Apostado: <span id="valorTotal">R$ 0,00</span></p>
        <button type="submit">Enviar Aposta</button>
      </form>
    </section>

    <section id="apostas-feitas">
      <h2>Apostas Realizadas</h2>
      <ul id="listaApostas"></ul>
    </section>
    <section id="apostas-feitas">
      <h2>Bilhetes Gerados</h2>
      <ul id="listaApostas"></ul>
      <div id="bilhetesGerados"></div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Esporte da Sorte ‚Ä¢ Todos os direitos reservados. Desenvolvido por Kaua Andrade</p>
  </footer>
  
  <script>
  async function gerarPDF(bilheteId, nome, dataHora, valor, retorno, jogos) {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    doc.setFontSize(12);
    doc.text(`üéüÔ∏è Bilhete: ${bilheteId}`, 10, 10);
    doc.text(`üë§ Nome: ${nome}`, 10, 20);
    doc.text(`üïí Data/Hora: ${dataHora}`, 10, 30);
    doc.text(`üí∞ Valor Apostado: R$ ${valor.toFixed(2)}`, 10, 40);
    doc.text(`üìà Retorno Estimado: R$ ${retorno}`, 10, 50);
    doc.text(`üß© Jogos:`, 10, 60);

    jogos.forEach((jogo, i) => {
      doc.text(`‚Ä¢ ${jogo}`, 12, 70 + i * 10);
    });

    doc.save(`${bilheteId}.pdf`);
  }

  function imprimirBilhete(bilheteDiv) {
    const printWindow = window.open('', '', 'width=600,height=800');
    printWindow.document.write('<html><head><title>Bilhete</title></head><body>');
    printWindow.document.write(bilheteDiv.innerHTML);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
  }

  function gerarCodigoBilhete() {
    const data = new Date();
    const dataStr = data.toISOString().slice(0, 10).replace(/-/g, '');
    const aleatorio = Math.random().toString(36).substring(2, 7).toUpperCase();
    return `BIL-${dataStr}-${aleatorio}`;
  }

  function formatarDataHora() {
    const data = new Date();
    return data.toLocaleString('pt-BR');
  }

  function adicionarJogo(valor = '') {
    const container = document.getElementById('jogosContainer');
    const input = document.createElement('input');
    input.type = 'text';
    input.name = 'jogo[]';
    input.placeholder = 'Digite o jogo e o palpite';
    input.required = true;
    input.value = valor;
    container.appendChild(input);
  }

  function atualizarValor() {
    const valorInput = document.querySelector('input[name="valor"]');
    const valor = parseFloat(valorInput.value || 0);
    document.getElementById('valorTotal').textContent = `R$ ${valor.toFixed(2)}`;
  }

  window.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const jogoURL = params.get('jogo');
    const container = document.getElementById('jogosContainer');

    container.innerHTML = '';
    if (jogoURL) {
      adicionarJogo(decodeURIComponent(jogoURL));
    } else {
      adicionarJogo();
    }
  });

  document.getElementById('formAposta').addEventListener('submit', async function (e) {
    e.preventDefault();

    const nome = document.querySelector('input[name="nome"]').value.trim();
    const valorInput = document.querySelector('input[name="valor"]');
    const valor = parseFloat(valorInput.value);
    const jogos = [...document.getElementsByName('jogo[]')]
      .map(j => j.value.trim())
      .filter(v => v !== '');

    if (!nome || !valor || valor <= 0 || jogos.length === 0) {
      alert('Preencha corretamente todos os campos: nome, valor e pelo menos um jogo.');
      return;
    }

    const bilheteId = gerarCodigoBilhete();
    const dataHora = formatarDataHora();
    const retornoEstimado = (valor * 1.8).toFixed(2);

    const bilheteHTML = document.createElement('div');
    bilheteHTML.style.border = '1px dashed #ccc';
    bilheteHTML.style.padding = '10px';
    bilheteHTML.style.margin = '10px 0';
    bilheteHTML.style.background = '#f9f9f9';

    bilheteHTML.innerHTML = `
      <strong>üéüÔ∏è Bilhete #${bilheteId}</strong><br>
      üë§ Nome: ${nome}<br>
      üïí Data/Hora: ${dataHora}<br>
      üí∞ Valor Apostado: R$ ${valor.toFixed(2)}<br>
      üìà Retorno Estimado: <strong>R$ ${retornoEstimado}</strong><br>
      üß© Jogos:<br>
      <ul>${jogos.map(j => `<li>${j}</li>`).join('')}</ul>
      <button onclick="gerarPDF('${bilheteId}', '${nome}', '${dataHora}', ${valor}, '${retornoEstimado}', ${JSON.stringify(jogos)})">
        üìÑ Gerar PDF
      </button>
      <button onclick="imprimirBilhete(this.parentElement)">üñ®Ô∏è Imprimir</button>
    `;

    document.getElementById('bilhetesGerados').appendChild(bilheteHTML);

    const li = document.createElement('li');
    li.textContent = `Bilhete ${bilheteId} - R$${valor.toFixed(2)} - ${jogos.length} jogo(s)`;
    document.getElementById('listaApostas').appendChild(li);

    this.reset();
    document.getElementById('valorTotal').textContent = 'R$ 0,00';
    document.getElementById('jogosContainer').innerHTML = '';
    adicionarJogo();
  });
</script>

</body>
</html>
